(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function m(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=m(e);fetch(e.href,t)}})();let r=null,a=null,n=null,o=null,i=null;async function f(){const s=await navigator.mediaDevices.getUserMedia({video:!0});if(r=document.querySelector("#videoOne"),a=document.querySelector("#videoTwo"),!r||!a)throw new Error("Video tags missing");r.autoplay=!0,r.srcObject=s,a.autoplay=!0,i=document.createElement("img"),i.src="logo.svg",r.addEventListener("canplay",()=>{r.requestVideoFrameCallback(()=>u()),o=document.createElement("canvas"),o.width=r.videoWidth,o.height=r.videoHeight,n=o.getContext("2d"),a.srcObject=o.captureStream(20)},{once:!0})}function u(){if(!r||!a)throw new Error("Video tags missing");if(!o||!n)throw new Error("Canvas is missing");n.drawImage(r,0,0,o.width,o.height),i&&i.naturalWidth&&(n.globalAlpha=.5,n.drawImage(i,o.width-i.naturalWidth-10,10,i.naturalWidth,i.naturalHeight),n.globalAlpha=1),r.requestVideoFrameCallback(()=>u())}document.querySelector("#app").innerHTML=`
  <div>
    <video id="videoOne"></video>
    <video id="videoTwo"></video>
  </div>
`;f();
